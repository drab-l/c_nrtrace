#pragma once

/* COUNT : count argumants */
/* expand to inner macro */
#define COUNT(...) M14621_COUNT(__VA_ARGS__)
/* add head argument for avoid non argument call */
#define M14621_COUNT(...) M14621_COUNT_NON_ZERO(__VA_OPT__(,)__VA_ARGS__)
/* add tail argument for select count of argument */
#define M14621_COUNT_NON_ZERO(...) M14621_COUNT_NON_ZERO_1(__VA_ARGS__, M14621_COUNT_NON_ZERO_ARGS)
/* expand tail argument macro */
#define M14621_COUNT_NON_ZERO_1(...) M14621_COUNT_NON_ZERO_2(__VA_ARGS__)
/* select count of argument */
#define M14621_COUNT_NON_ZERO_2(v_,v20_,v19_,v18_,v17_,v16_,v15_,v14_,v13_,v12_,v11_,v10_,v9_,v8_,v7_,v6_,v5_,v4_,v3_,v2_,v1_,v0_,...) v0_
/* counter number */
#define M14621_COUNT_NON_ZERO_ARGS 20,19,18,17,16,15,14,13,12,11,10,9,8,7,6,5,4,3,2,1,0

/* FOLD_CALLS_ADD_PAREN_AND_UNWRAP_SEP : fold calling repeat functions, add function call parenthesis and separator */
/* count arguments and expand to inner macro */
#define FOLD_CALLS_ADD_PAREN_AND_UNWRAP_SEP(...) M14621_FOLD_CALLS_ADD_PAREN_AND_UNWRAP_SEP_1(COUNT(__VA_ARGS__),__VA_ARGS__)
/* expand COUNT macro */
#define M14621_FOLD_CALLS_ADD_PAREN_AND_UNWRAP_SEP_1(...) M14621_FOLD_CALLS_ADD_PAREN_AND_UNWRAP_SEP_2(__VA_ARGS__)
/* select macro */
#define M14621_FOLD_CALLS_ADD_PAREN_AND_UNWRAP_SEP_2(v_,...) M14621_FOLD_CALLS_APAUS_##v_(__VA_ARGS__)

/* remoce parenthesis from separator */
#define M14621_UNWRAP_PAREN(...) __VA_ARGS__

#define M14621_FOLD_CALLS_APAUS_3(s_,f_,v1_) f_(v1_)
#define M14621_FOLD_CALLS_APAUS_4(s_,f_,v1_,...) M14621_FOLD_CALLS_APAUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_APAUS_3(s_,f_,__VA_ARGS__)
#define M14621_FOLD_CALLS_APAUS_5(s_,f_,v1_,...) M14621_FOLD_CALLS_APAUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_APAUS_4(s_,f_,__VA_ARGS__)
#define M14621_FOLD_CALLS_APAUS_6(s_,f_,v1_,...) M14621_FOLD_CALLS_APAUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_APAUS_5(s_,f_,__VA_ARGS__)
#define M14621_FOLD_CALLS_APAUS_7(s_,f_,v1_,...) M14621_FOLD_CALLS_APAUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_APAUS_6(s_,f_,__VA_ARGS__)
#define M14621_FOLD_CALLS_APAUS_8(s_,f_,v1_,...) M14621_FOLD_CALLS_APAUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_APAUS_7(s_,f_,__VA_ARGS__)
#define M14621_FOLD_CALLS_APAUS_9(s_,f_,v1_,...) M14621_FOLD_CALLS_APAUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_APAUS_8(s_,f_,__VA_ARGS__)
#define M14621_FOLD_CALLS_APAUS_10(s_,f_,v1_,...) M14621_FOLD_CALLS_APAUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_APAUS_9(s_,f_,__VA_ARGS__)
#define M14621_FOLD_CALLS_APAUS_11(s_,f_,v1_,...) M14621_FOLD_CALLS_APAUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_APAUS_10(s_,f_,__VA_ARGS__)
#define M14621_FOLD_CALLS_APAUS_12(s_,f_,v1_,...) M14621_FOLD_CALLS_APAUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_APAUS_11(s_,f_,__VA_ARGS__)
#define M14621_FOLD_CALLS_APAUS_13(s_,f_,v1_,...) M14621_FOLD_CALLS_APAUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_APAUS_12(s_,f_,__VA_ARGS__)
#define M14621_FOLD_CALLS_APAUS_14(s_,f_,v1_,...) M14621_FOLD_CALLS_APAUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_APAUS_13(s_,f_,__VA_ARGS__)
#define M14621_FOLD_CALLS_APAUS_15(s_,f_,v1_,...) M14621_FOLD_CALLS_APAUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_APAUS_14(s_,f_,__VA_ARGS__)
#define M14621_FOLD_CALLS_APAUS_16(s_,f_,v1_,...) M14621_FOLD_CALLS_APAUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_APAUS_14(s_,f_,__VA_ARGS__)
#define M14621_FOLD_CALLS_APAUS_17(s_,f_,v1_,...) M14621_FOLD_CALLS_APAUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_APAUS_14(s_,f_,__VA_ARGS__)
#define M14621_FOLD_CALLS_APAUS_18(s_,f_,v1_,...) M14621_FOLD_CALLS_APAUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_APAUS_14(s_,f_,__VA_ARGS__)
#define M14621_FOLD_CALLS_APAUS_19(s_,f_,v1_,...) M14621_FOLD_CALLS_APAUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_APAUS_14(s_,f_,__VA_ARGS__)
#define M14621_FOLD_CALLS_APAUS_20(s_,f_,v1_,...) M14621_FOLD_CALLS_APAUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_APAUS_14(s_,f_,__VA_ARGS__)

/* FOLD_CALLS_ADD_UNWRAP_SEP : fold calling repeat functions, "NOT" add function call parenthesis, add separator */
#define FOLD_CALLS_ADD_UNWRAP_SEP(...) M14621_FOLD_CALLS_ADD_UNWRAP_SEP_1(COUNT(__VA_ARGS__),__VA_ARGS__)
#define M14621_FOLD_CALLS_ADD_UNWRAP_SEP_1(...) M14621_FOLD_CALLS_ADD_UNWRAP_SEP_2(__VA_ARGS__)
#define M14621_FOLD_CALLS_ADD_UNWRAP_SEP_2(v_,...) M14621_FOLD_CALLS_AUS_##v_(__VA_ARGS__)

#define M14621_FOLD_CALLS_AUS_3(s_,f_,v1_) f_ v1_
#define M14621_FOLD_CALLS_AUS_4(s_,f_,v1_,...) M14621_FOLD_CALLS_AUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_AUS_3(s_,f_,__VA_ARGS__)
#define M14621_FOLD_CALLS_AUS_5(s_,f_,v1_,...) M14621_FOLD_CALLS_AUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_AUS_4(s_,f_,__VA_ARGS__)
#define M14621_FOLD_CALLS_AUS_6(s_,f_,v1_,...) M14621_FOLD_CALLS_AUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_AUS_5(s_,f_,__VA_ARGS__)
#define M14621_FOLD_CALLS_AUS_7(s_,f_,v1_,...) M14621_FOLD_CALLS_AUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_AUS_6(s_,f_,__VA_ARGS__)
#define M14621_FOLD_CALLS_AUS_8(s_,f_,v1_,...) M14621_FOLD_CALLS_AUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_AUS_7(s_,f_,__VA_ARGS__)
#define M14621_FOLD_CALLS_AUS_9(s_,f_,v1_,...) M14621_FOLD_CALLS_AUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_AUS_8(s_,f_,__VA_ARGS__)
#define M14621_FOLD_CALLS_AUS_10(s_,f_,v1_,...) M14621_FOLD_CALLS_AUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_AUS_9(s_,f_,__VA_ARGS__)
#define M14621_FOLD_CALLS_AUS_11(s_,f_,v1_,...) M14621_FOLD_CALLS_AUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_AUS_10(s_,f_,__VA_ARGS__)
#define M14621_FOLD_CALLS_AUS_12(s_,f_,v1_,...) M14621_FOLD_CALLS_AUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_AUS_11(s_,f_,__VA_ARGS__)
#define M14621_FOLD_CALLS_AUS_13(s_,f_,v1_,...) M14621_FOLD_CALLS_AUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_AUS_12(s_,f_,__VA_ARGS__)
#define M14621_FOLD_CALLS_AUS_14(s_,f_,v1_,...) M14621_FOLD_CALLS_AUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_AUS_13(s_,f_,__VA_ARGS__)
#define M14621_FOLD_CALLS_AUS_15(s_,f_,v1_,...) M14621_FOLD_CALLS_AUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_AUS_14(s_,f_,__VA_ARGS__)
#define M14621_FOLD_CALLS_AUS_16(s_,f_,v1_,...) M14621_FOLD_CALLS_AUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_AUS_14(s_,f_,__VA_ARGS__)
#define M14621_FOLD_CALLS_AUS_17(s_,f_,v1_,...) M14621_FOLD_CALLS_AUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_AUS_14(s_,f_,__VA_ARGS__)
#define M14621_FOLD_CALLS_AUS_18(s_,f_,v1_,...) M14621_FOLD_CALLS_AUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_AUS_14(s_,f_,__VA_ARGS__)
#define M14621_FOLD_CALLS_AUS_19(s_,f_,v1_,...) M14621_FOLD_CALLS_AUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_AUS_14(s_,f_,__VA_ARGS__)
#define M14621_FOLD_CALLS_AUS_20(s_,f_,v1_,...) M14621_FOLD_CALLS_AUS_3(s_,f_,v1_) M14621_UNWRAP_PAREN s_ M14621_FOLD_CALLS_AUS_14(s_,f_,__VA_ARGS__)

/* fold calling repeat functions, add function call parenthesis */
#define FOLD_CALLS_ADD_PAREN_SEP_COMMA(...) FOLD_CALLS_ADD_PAREN_AND_UNWRAP_SEP((,),__VA_ARGS__)

/* fold calling repeat functions, "NOT" add function call parenthesis */
#define FOLD_CALLS_SEP_COMMA(...) FOLD_CALLS_ADD_UNWRAP_SEP((,), __VA_ARGS__)

/* fold calling repeat functions, add function call parenthesis, no separator */
#define FOLD_CALLS_ADD_PAREN(...) FOLD_CALLS_ADD_PAREN_AND_UNWRAP_SEP(( ),__VA_ARGS__)

/* fold calling repeat functions, "NOT" add function call parenthesis, no separator */
#define FOLD_CALLS(...) FOLD_CALLS_ADD_UNWRAP_SEP(( ), __VA_ARGS__)

